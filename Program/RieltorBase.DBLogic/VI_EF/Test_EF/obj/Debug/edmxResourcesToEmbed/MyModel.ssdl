<?xml version="1.0" encoding="utf-8"?>
<Schema Namespace="VolgInfoDBModel.Store" Provider="System.Data.SqlClient" ProviderManifestToken="2008" Alias="Self" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns:customannotation="http://schemas.microsoft.com/ado/2013/11/edm/customannotation" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl">
  <EntityType Name="Action">
    <Key>
      <PropertyRef Name="Id_action" />
    </Key>
    <Property Name="Id_action" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Name" Type="nvarchar" MaxLength="50" Nullable="false" />
  </EntityType>
  <EntityType Name="Agent">
    <Key>
      <PropertyRef Name="Id_agent" />
    </Key>
    <Property Name="Id_agent" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Name" Type="nvarchar" MaxLength="50" Nullable="false" />
    <Property Name="LastName" Type="nvarchar" MaxLength="50" Nullable="false" />
    <Property Name="Addres" Type="nvarchar" MaxLength="50" Nullable="false" />
    <Property Name="PhoneNumber" Type="nvarchar" MaxLength="50" Nullable="false" />
    <Property Name="Id_firm" Type="int" Nullable="false" />
    <Property Name="FirmAdmin" Type="bit" Nullable="false" />
  </EntityType>
  <EntityType Name="Apartment">
    <Key>
      <PropertyRef Name="Id_apartment" />
    </Key>
    <Property Name="Id_apartment" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Id_typeApartment" Type="int" Nullable="false" />
    <Property Name="Id_agent" Type="int" />
  </EntityType>
  <!--Errors Found During Generation:
warning 6002: The table/view 'VolgInfoDB.dbo.Apartment_PropertiesApartment' does not have a primary key defined. The key has been inferred and the definition was created as a read-only table/view.-->
  <EntityType Name="Apartment_PropertiesApartment">
    <Key>
      <PropertyRef Name="Id_apartment" />
      <PropertyRef Name="Id_propertiesApartment" />
      <PropertyRef Name="ValueProperties" />
    </Key>
    <Property Name="Id_apartment" Type="int" Nullable="false" />
    <Property Name="Id_propertiesApartment" Type="int" Nullable="false" />
    <Property Name="ValueProperties" Type="nvarchar" MaxLength="255" Nullable="false" />
  </EntityType>
  <EntityType Name="Changelog">
    <Key>
      <PropertyRef Name="Id_changelog" />
    </Key>
    <Property Name="Id_changelog" Type="int" Nullable="false" />
    <Property Name="DateChange" Type="date" Nullable="false" />
    <Property Name="Description" Type="text" Nullable="false" />
    <Property Name="Action" Type="nvarchar" MaxLength="50" Nullable="false" />
    <Property Name="AgentWhoChanges" Type="xml" Nullable="false" />
    <Property Name="ApartmentInfo" Type="xml" Nullable="false" />
  </EntityType>
  <EntityType Name="ChangelogAgent">
    <Key>
      <PropertyRef Name="Id_agentCangelog" />
    </Key>
    <Property Name="Id_agentCangelog" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="DateChange" Type="date" Nullable="false" />
    <Property Name="Description" Type="text" Nullable="false" />
    <Property Name="Action" Type="nvarchar" MaxLength="50" Nullable="false" />
    <Property Name="AgentWhoChanges" Type="xml" Nullable="false" />
    <Property Name="AgentInfo" Type="xml" Nullable="false" />
  </EntityType>
  <EntityType Name="Firm">
    <Key>
      <PropertyRef Name="Id_firm" />
    </Key>
    <Property Name="Id_firm" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Name" Type="nvarchar" MaxLength="50" Nullable="false" />
  </EntityType>
  <EntityType Name="PhotoApartment">
    <Key>
      <PropertyRef Name="Id_photo" />
    </Key>
    <Property Name="Id_photo" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Name" Type="image" Nullable="false" />
    <Property Name="Id_apartment" Type="int" Nullable="false" />
    <Property Name="Id_firm" Type="int" Nullable="false" />
  </EntityType>
  <EntityType Name="PropertiesApartment">
    <Key>
      <PropertyRef Name="Id_propertiesApartment" />
    </Key>
    <Property Name="Id_propertiesApartment" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="NameProperties" Type="nvarchar" MaxLength="50" Nullable="false" />
    <Property Name="TypeProperties" Type="nvarchar" MaxLength="50" Nullable="false" />
  </EntityType>
  <EntityType Name="TypeApartment">
    <Key>
      <PropertyRef Name="id_typeApartment" />
    </Key>
    <Property Name="id_typeApartment" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="TypeName" Type="nvarchar" MaxLength="50" Nullable="false" />
  </EntityType>
  <!--Errors Found During Generation:
warning 6002: The table/view 'VolgInfoDB.dbo.TypeApartment_PropertiesApartment' does not have a primary key defined. The key has been inferred and the definition was created as a read-only table/view.-->
  <EntityType Name="TypeApartment_PropertiesApartment">
    <Key>
      <PropertyRef Name="id_typeApartment" />
      <PropertyRef Name="Id_propertiesApartment" />
    </Key>
    <Property Name="id_typeApartment" Type="int" Nullable="false" />
    <Property Name="Id_propertiesApartment" Type="int" Nullable="false" />
  </EntityType>
  <Association Name="FK_Agent_Firm">
    <End Role="Firm" Type="Self.Firm" Multiplicity="1">
      <OnDelete Action="Cascade" />
    </End>
    <End Role="Agent" Type="Self.Agent" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="Firm">
        <PropertyRef Name="Id_firm" />
      </Principal>
      <Dependent Role="Agent">
        <PropertyRef Name="Id_firm" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_Apartament_Agent">
    <End Role="Agent" Type="Self.Agent" Multiplicity="0..1">
      <OnDelete Action="Cascade" />
    </End>
    <End Role="Apartment" Type="Self.Apartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="Agent">
        <PropertyRef Name="Id_agent" />
      </Principal>
      <Dependent Role="Apartment">
        <PropertyRef Name="Id_agent" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_Apartament_PropertiesApartment_Apartament1">
    <End Role="Apartment" Type="Self.Apartment" Multiplicity="1">
      <OnDelete Action="Cascade" />
    </End>
    <End Role="Apartment_PropertiesApartment" Type="Self.Apartment_PropertiesApartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="Apartment">
        <PropertyRef Name="Id_apartment" />
      </Principal>
      <Dependent Role="Apartment_PropertiesApartment">
        <PropertyRef Name="Id_apartment" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_Apartament_PropertiesApartment_PropertiesApartment1">
    <End Role="PropertiesApartment" Type="Self.PropertiesApartment" Multiplicity="1">
      <OnDelete Action="Cascade" />
    </End>
    <End Role="Apartment_PropertiesApartment" Type="Self.Apartment_PropertiesApartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="PropertiesApartment">
        <PropertyRef Name="Id_propertiesApartment" />
      </Principal>
      <Dependent Role="Apartment_PropertiesApartment">
        <PropertyRef Name="Id_propertiesApartment" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_Apartament_TypeApartament">
    <End Role="TypeApartment" Type="Self.TypeApartment" Multiplicity="1" />
    <End Role="Apartment" Type="Self.Apartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="TypeApartment">
        <PropertyRef Name="id_typeApartment" />
      </Principal>
      <Dependent Role="Apartment">
        <PropertyRef Name="Id_typeApartment" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_Photo_Apartament">
    <End Role="Apartment" Type="Self.Apartment" Multiplicity="1" />
    <End Role="PhotoApartment" Type="Self.PhotoApartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="Apartment">
        <PropertyRef Name="Id_apartment" />
      </Principal>
      <Dependent Role="PhotoApartment">
        <PropertyRef Name="Id_apartment" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_PhotoApartment_Firm">
    <End Role="Firm" Type="Self.Firm" Multiplicity="1" />
    <End Role="PhotoApartment" Type="Self.PhotoApartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="Firm">
        <PropertyRef Name="Id_firm" />
      </Principal>
      <Dependent Role="PhotoApartment">
        <PropertyRef Name="Id_firm" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_TypeApartament_PropertiesApartment_PropertiesApartment1">
    <End Role="PropertiesApartment" Type="Self.PropertiesApartment" Multiplicity="1">
      <OnDelete Action="Cascade" />
    </End>
    <End Role="TypeApartment_PropertiesApartment" Type="Self.TypeApartment_PropertiesApartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="PropertiesApartment">
        <PropertyRef Name="Id_propertiesApartment" />
      </Principal>
      <Dependent Role="TypeApartment_PropertiesApartment">
        <PropertyRef Name="Id_propertiesApartment" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <Association Name="FK_TypeApartament_PropertiesApartment_TypeApartament1">
    <End Role="TypeApartment" Type="Self.TypeApartment" Multiplicity="1" />
    <End Role="TypeApartment_PropertiesApartment" Type="Self.TypeApartment_PropertiesApartment" Multiplicity="*" />
    <ReferentialConstraint>
      <Principal Role="TypeApartment">
        <PropertyRef Name="id_typeApartment" />
      </Principal>
      <Dependent Role="TypeApartment_PropertiesApartment">
        <PropertyRef Name="id_typeApartment" />
      </Dependent>
    </ReferentialConstraint>
  </Association>
  <EntityContainer Name="VolgInfoDBModelStoreContainer">
    <EntitySet Name="Action" EntityType="Self.Action" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="Agent" EntityType="Self.Agent" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="Apartment" EntityType="Self.Apartment" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="Changelog" EntityType="Self.Changelog" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="ChangelogAgent" EntityType="Self.ChangelogAgent" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="Firm" EntityType="Self.Firm" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="PhotoApartment" EntityType="Self.PhotoApartment" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="PropertiesApartment" EntityType="Self.PropertiesApartment" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="TypeApartment" EntityType="Self.TypeApartment" Schema="dbo" store:Type="Tables" />
    <EntitySet Name="Apartment_PropertiesApartment" EntityType="Self.Apartment_PropertiesApartment" store:Type="Tables" store:Schema="dbo">
      <DefiningQuery>SELECT 
    [Apartment_PropertiesApartment].[Id_apartment] AS [Id_apartment], 
    [Apartment_PropertiesApartment].[Id_propertiesApartment] AS [Id_propertiesApartment], 
    [Apartment_PropertiesApartment].[ValueProperties] AS [ValueProperties]
    FROM [dbo].[Apartment_PropertiesApartment] AS [Apartment_PropertiesApartment]</DefiningQuery>
    </EntitySet>
    <EntitySet Name="TypeApartment_PropertiesApartment" EntityType="Self.TypeApartment_PropertiesApartment" store:Type="Tables" store:Schema="dbo">
      <DefiningQuery>SELECT 
    [TypeApartment_PropertiesApartment].[id_typeApartment] AS [id_typeApartment], 
    [TypeApartment_PropertiesApartment].[Id_propertiesApartment] AS [Id_propertiesApartment]
    FROM [dbo].[TypeApartment_PropertiesApartment] AS [TypeApartment_PropertiesApartment]</DefiningQuery>
    </EntitySet>
    <AssociationSet Name="FK_Agent_Firm" Association="Self.FK_Agent_Firm">
      <End Role="Firm" EntitySet="Firm" />
      <End Role="Agent" EntitySet="Agent" />
    </AssociationSet>
    <AssociationSet Name="FK_Apartament_Agent" Association="Self.FK_Apartament_Agent">
      <End Role="Agent" EntitySet="Agent" />
      <End Role="Apartment" EntitySet="Apartment" />
    </AssociationSet>
    <AssociationSet Name="FK_Apartament_PropertiesApartment_Apartament1" Association="Self.FK_Apartament_PropertiesApartment_Apartament1">
      <End Role="Apartment" EntitySet="Apartment" />
      <End Role="Apartment_PropertiesApartment" EntitySet="Apartment_PropertiesApartment" />
    </AssociationSet>
    <AssociationSet Name="FK_Apartament_PropertiesApartment_PropertiesApartment1" Association="Self.FK_Apartament_PropertiesApartment_PropertiesApartment1">
      <End Role="PropertiesApartment" EntitySet="PropertiesApartment" />
      <End Role="Apartment_PropertiesApartment" EntitySet="Apartment_PropertiesApartment" />
    </AssociationSet>
    <AssociationSet Name="FK_Apartament_TypeApartament" Association="Self.FK_Apartament_TypeApartament">
      <End Role="TypeApartment" EntitySet="TypeApartment" />
      <End Role="Apartment" EntitySet="Apartment" />
    </AssociationSet>
    <AssociationSet Name="FK_Photo_Apartament" Association="Self.FK_Photo_Apartament">
      <End Role="Apartment" EntitySet="Apartment" />
      <End Role="PhotoApartment" EntitySet="PhotoApartment" />
    </AssociationSet>
    <AssociationSet Name="FK_PhotoApartment_Firm" Association="Self.FK_PhotoApartment_Firm">
      <End Role="Firm" EntitySet="Firm" />
      <End Role="PhotoApartment" EntitySet="PhotoApartment" />
    </AssociationSet>
    <AssociationSet Name="FK_TypeApartament_PropertiesApartment_PropertiesApartment1" Association="Self.FK_TypeApartament_PropertiesApartment_PropertiesApartment1">
      <End Role="PropertiesApartment" EntitySet="PropertiesApartment" />
      <End Role="TypeApartment_PropertiesApartment" EntitySet="TypeApartment_PropertiesApartment" />
    </AssociationSet>
    <AssociationSet Name="FK_TypeApartament_PropertiesApartment_TypeApartament1" Association="Self.FK_TypeApartament_PropertiesApartment_TypeApartament1">
      <End Role="TypeApartment" EntitySet="TypeApartment" />
      <End Role="TypeApartment_PropertiesApartment" EntitySet="TypeApartment_PropertiesApartment" />
    </AssociationSet>
  </EntityContainer>
</Schema>